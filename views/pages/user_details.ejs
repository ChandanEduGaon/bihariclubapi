<%- include('../common/header') %>
<!-- Layout wrapper -->
<div class="layout-wrapper layout-content-navbar">
  <div class="layout-container">
    <!-- Menu -->
    <%- include('../common/sidebar') %>
    <!-- / Menu -->

    <!-- Layout container -->
    <div class="layout-page">
      <!-- Navbar -->
      <%- include('../common/navbar') %>
      <!-- / Navbar -->

      <!-- Content wrapper -->
      <div class="content-wrapper border-top">
        <!-- Content -->
        <div class="container-xxl flex-grow-1 container-p-y">
          <div class="row mb-4">
            <div class="col-12">
              <nav aria-label="breadcrumb">
                <ol class="breadcrumb breadcrumb-style1">
                  <li class="breadcrumb-item">
                    <a href="/admin/dashboard">Dashboard</a>
                  </li>
                  <li class="breadcrumb-item">
                    <a href="/admin/users">Users</a>
                  </li>
                  <li class="breadcrumb-item active">
                    <%= data.user.username %>
                  </li>
                </ol>
              </nav>
            </div>
          </div>
          <div class="row mb-4 gy-6">
            <div class="col-lg-3 col-sm-6">
              <div
                class="card transparent-card bg-transparent shadow-none border-1"
              >
                <div class="card-body">
                  <div class="d-flex align-items-center flex-wrap gap-2">
                    <div class="avatar me-2">
                      <div class="avatar-initial rounded shadow-xs">
                        <i class="ri-currency-line ri-24px text-primary"></i>
                      </div>
                    </div>
                    <div class="card-info">
                      <p class="mb-0">Total Bet</p>
                      <div class="d-flex align-items-center">
                        <h5 class="mb-0">
                          <%= new Intl.NumberFormat('en-US', { style:
                          'currency', currency: 'INR'
                          }).format(data.total_bet_amount) %>
                        </h5>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-lg-3 col-sm-6">
              <div
                class="card transparent-card bg-transparent shadow-none border-1"
              >
                <div class="card-body">
                  <div class="d-flex align-items-center flex-wrap gap-2">
                    <div class="avatar me-2">
                      <div class="avatar-initial rounded shadow-xs">
                        <i class="ri-currency-line ri-24px text-success"></i>
                      </div>
                    </div>
                    <div class="card-info">
                      <p class="mb-0">Total Win</p>
                      <div class="d-flex align-items-center">
                        <h5 class="mb-0">
                          <%= new Intl.NumberFormat('en-US', { style:
                          'currency', currency: 'INR' }).format(data.win_amount)
                          %>
                        </h5>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-lg-3 col-sm-6">
              <div
                class="card transparent-card bg-transparent shadow-none border-1"
              >
                <div class="card-body">
                  <div class="d-flex align-items-center flex-wrap gap-2">
                    <div class="avatar me-2">
                      <div class="avatar-initial rounded shadow-xs">
                        <i class="ri-currency-line ri-24px text-danger"></i>
                      </div>
                    </div>
                    <div class="card-info">
                      <p class="mb-0">Total Loss</p>
                      <div class="d-flex align-items-center">
                        <h5 class="mb-0">
                          <%= new Intl.NumberFormat('en-US', { style:
                          'currency', currency: 'INR'
                          }).format(data.loss_amount) %>
                        </h5>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-lg-3 col-sm-6">
              <div
                class="card transparent-card bg-transparent shadow-none border-1"
              >
                <div class="card-body">
                  <div class="d-flex align-items-center flex-wrap gap-2">
                    <div class="avatar me-2">
                      <div class="avatar-initial rounded shadow-xs">
                        <i class="ri-currency-line ri-24px text-warning"></i>
                      </div>
                    </div>
                    <div class="card-info">
                      <p class="mb-0">Total Deposit</p>
                      <div class="d-flex align-items-center">
                        <h5 class="mb-0">
                          <%= new Intl.NumberFormat('en-US', { style:
                          'currency', currency: 'INR'
                          }).format(data.user.deposite_money) %>
                        </h5>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-lg-3 col-sm-6">
              <div
                class="card transparent-card bg-transparent shadow-none border-1"
              >
                <div class="card-body">
                  <div class="d-flex align-items-center flex-wrap gap-2">
                    <div class="avatar me-2">
                      <div class="avatar-initial rounded shadow-xs">
                        <i class="ri-currency-line ri-24px text-success"></i>
                      </div>
                    </div>
                    <div class="card-info">
                      <p class="mb-0">Total Withdrawal</p>
                      <div class="d-flex align-items-center">
                        <h5 class="mb-0">
                          <%= new Intl.NumberFormat('en-US', { style:
                          'currency', currency: 'INR'
                          }).format(data.user.withdraw_money) %>
                        </h5>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-lg-3 col-sm-6">
              <div
                class="card transparent-card bg-transparent shadow-none border-1"
              >
                <div class="card-body">
                  <div class="d-flex align-items-center flex-wrap gap-2">
                    <div class="avatar me-2">
                      <div class="avatar-initial rounded shadow-xs">
                        <i class="ri-currency-line ri-24px text-success"></i>
                      </div>
                    </div>
                    <div class="card-info">
                      <p class="mb-0">Total Claim</p>
                      <div class="d-flex align-items-center">
                        <h5 class="mb-0">
                          <%= new Intl.NumberFormat('en-US', { style:
                          'currency', currency: 'INR'
                          }).format(data.user.claim_money) %>
                        </h5>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-lg-3 col-sm-6">
              <div
                class="card transparent-card bg-transparent shadow-none border-1"
              >
                <div class="card-body">
                  <div class="d-flex align-items-center flex-wrap gap-2">
                    <div class="avatar me-2">
                      <div class="avatar-initial rounded shadow-xs">
                        <i class="ri-currency-line ri-24px text-success"></i>
                      </div>
                    </div>
                    <div class="card-info">
                      <p class="mb-0">Total Commmission</p>
                      <div class="d-flex align-items-center">
                        <h5 class="mb-0">
                          <%= new Intl.NumberFormat('en-US', { style:
                          'currency', currency: 'INR'
                          }).format(data.user.commmission_money) %>
                        </h5>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-lg-3 col-sm-6">
              <div
                class="card transparent-card bg-transparent shadow-none border-1"
              >
                <div class="card-body">
                  <div class="d-flex align-items-center flex-wrap gap-2">
                    <div class="avatar me-2">
                      <div class="avatar-initial rounded shadow-xs">
                        <i class="ri-currency-line ri-24px text-success"></i>
                      </div>
                    </div>
                    <div class="card-info">
                      <p class="mb-0">First Deposit</p>
                      <div class="d-flex align-items-center">
                        <h5 class="mb-0">
                          <%= new Intl.NumberFormat('en-US', { style:
                          'currency', currency: 'INR'
                          }).format(data.user.first_deposite) %>
                        </h5>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <!-- User Sidebar -->
            <div class="col-xl-4 col-lg-5 col-md-5 order-1 order-md-0">
              <!-- User Card -->
              <div class="card mb-6">
                <div class="card-body pt-12">
                  <div class="user-avatar-section">
                    <div class="d-flex align-items-center flex-column">
                      <img
                        class="img-fluid rounded mb-4"
                        src="/assets/img/avatars/1.png"
                        height="120"
                        width="120"
                        alt="User avatar"
                      />
                      <div class="user-info text-center">
                        <h5><%= data.user.name %></h5>
                        <span
                          class="badge bg-label-danger rounded-pill text-capitalize"
                          ><%= data.user.role %></span
                        >
                      </div>
                    </div>
                  </div>
                  <div
                    class="d-flex justify-content-start flex-wrap my-6 gap-0 gap-md-3 gap-lg-4"
                  >
                    <div class="d-flex align-items-center me-5 gap-4">
                      <div class="avatar">
                        <div class="avatar-initial bg-label-success rounded">
                          <i class="ri-currency-line ri-24px"></i>
                        </div>
                      </div>
                      <div>
                        <h5 class="mb-0">
                          <%= new Intl.NumberFormat('en-US', { style:
                          'currency', currency: 'INR' }).format(data.user.money)
                          %>
                        </h5>
                        <span>Balance</span>
                      </div>
                    </div>
                  </div>
                  <h5 class="pb-4 border-bottom mb-4">Details</h5>
                  <div class="info-container">
                    <ul class="list-unstyled mb-6">
                      <li class="mb-2">
                        <span class="h6">Username:</span>
                        <span><%= data.user.username %></span>
                      </li>
                      <li class="mb-2">
                        <span class="h6">Email:</span>
                        <span><%= data.user.email %></span>
                      </li>
                      <li class="mb-2">
                        <span class="h6">Status:</span>
                        <span
                          class="badge bg-label-<%= data.user.status === 'active' ? 'success' : 'danger' %> rounded-pill"
                          ><%= data.user.status %></span
                        >
                      </li>
                      <li class="mb-2">
                        <span class="h6">Role:</span>
                        <span><%= data.user.role %></span>
                      </li>
                      <li class="mb-2">
                        <span class="h6">IP:</span>
                        <span><%= data.user.ip %></span>
                      </li>
                      <li class="mb-2">
                        <span class="h6">Phone:</span>
                        <span><%= data.user.phone %></span>
                      </li>
                      <li class="mb-2">
                        <span class="h6">Languages:</span>
                        <span>English</span>
                      </li>
                      <li class="mb-2">
                        <span class="h6">Country:</span>
                        <span>India</span>
                      </li>
                    </ul>
                    <!-- <div class="d-flex justify-content-center">
                      <a
                        href="javascript:;"
                        class="btn btn-primary me-4 waves-effect waves-light"
                        data-bs-target="#editUser"
                        data-bs-toggle="modal"
                        >Edit</a
                      >
                      <a
                        href="javascript:;"
                        class="btn btn-outline-danger suspend-user waves-effect"
                        >Suspend</a
                      >
                    </div> -->
                  </div>
                </div>
              </div>
              <!-- /User Card -->
            </div>
            <!--/ User Sidebar -->

            <!-- User Content -->
            <div class="col-xl-8 col-lg-7 col-md-7 order-0 order-md-1">
              

              <!-- Invoice table -->
              <div class="card mb-4">
                <h5 class="card-header">Bet History</h5>
                <div class="overflow-scroll" style="max-height: 400px">
                  <div class="table-responsive">
                    <table class="table table-sm">
                      <thead class="sticky-top">
                        <tr>
                          <th class="text-truncate">Game</th>
                          <th class="text-truncate">Time</th>
                          <th class="text-truncate">Amount</th>
                          <th class="text-truncate">Status</th>
                          <th class="text-truncate">Time</th>
                        </tr>
                      </thead>
                      <tbody id="usersDataTable">
                        <% data.bets.forEach(element => { %>
                        <tr>
                          <td><%= element.game %></td>
                          <td><%= element.game_type %></td>
                          <td class="bold">
                            <%= new Intl.NumberFormat('en-US', { style:
                            'currency', currency: 'INR'
                            }).format(element.amount) %>
                          </td>
                          <td>
                            <span
                              class="badge bg-<%= element.win_status === 'win' ? 'success' : 'secondary' %>"
                              ><%= element.win_status %></span
                            >
                          </td>
                          <td>
                            <%= new
                            Date(element.created_at).toLocaleString("en-US", {
                            year: 'numeric', month: 'long', day: 'numeric',
                            hour: '2-digit', minute: '2-digit', second:
                            '2-digit' }) %>
                          </td>
                        </tr>
                        <%});%>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
              <!-- /Invoice table -->

              <div class="row mb-4 gy-6">
                <div class="col-lg-4 col-sm-6">
                  <div
                    class="card transparent-card bg-transparent shadow-none border-1"
                  >
                    <div class="card-body">
                      <div class="d-flex align-items-center flex-wrap gap-2">
                        <div class="avatar me-2">
                          <div class="avatar-initial rounded shadow-xs">
                            <i
                              class="ri-sparkling-line ri-24px text-success"
                            ></i>
                          </div>
                        </div>
                        <div class="card-info">
                          <p class="mb-0">Level</p>
                          <div class="d-flex align-items-center">
                            <h5 class="mb-0">
                              <%= data.user.level %>
                            </h5>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-4 col-sm-6">
                  <div
                    class="card transparent-card bg-transparent shadow-none border-1"
                  >
                    <div class="card-body">
                      <div class="d-flex align-items-center flex-wrap gap-2">
                        <div class="avatar me-2">
                          <div class="avatar-initial rounded shadow-xs">
                            <i
                              class="ri-flashlight-line ri-24px text-danger"
                            ></i>
                          </div>
                        </div>
                        <div class="card-info">
                          <p class="mb-0">Total EXP</p>
                          <div class="d-flex align-items-center">
                            <h5 class="mb-0">
                              <%= data.user.exp %>
                            </h5>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!--/ User Content -->
          </div>
          <div class="row">
            <div class="col-12">
              <!-- Invoice table -->
              <div class="card mb-4">
                <h5 class="card-header">Transaction History</h5>
                <div class="overflow-scroll" style="max-height: 400px">
                  <div class="table-responsive">
                    <table class="table table-sm">
                      <thead class="sticky-top">
                        <tr>
                          <th class="text-truncate">UID</th>
                          <th class="text-truncate">Type</th>
                          <th class="text-truncate">Details</th>
                          <th class="text-truncate">Amount</th>
                          <th class="text-truncate">Time</th>
                        </tr>
                      </thead>
                      <tbody id="usersDataTable">
                        <% data.tnx_history.forEach(element => { %>
                        <tr>
                          <td><%= element.uid %></td>
                          <td><%= element.type %></td>
                          <td><%= element.details %></td>
                          <td class="bold">
                            <%= new Intl.NumberFormat('en-US', { style:
                            'currency', currency: 'INR'
                            }).format(element.amount) %>
                          </td>
                          <td>
                            <%= new
                            Date(element.created_at).toLocaleString("en-US", {
                            year: 'numeric', month: 'long', day: 'numeric',
                            hour: '2-digit', minute: '2-digit', second:
                            '2-digit' }) %>
                          </td>
                        </tr>
                        <%});%>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
              <!-- /Invoice table -->
              <!-- Invoice table -->
              <div class="card mb-4">
                <h5 class="card-header">Redeem History</h5>
                <div class="overflow-scroll" style="max-height: 400px">
                  <div class="table-responsive">
                    <table class="table table-sm">
                      <thead class="sticky-top">
                        <tr>
                          <th class="text-truncate">UID</th>
                          <th class="text-truncate">gift_code</th>
                          <th class="text-truncate">Amount</th>
                          <th class="text-truncate">Status</th>
                          <th class="text-truncate">Time</th>
                        </tr>
                      </thead>
                      <tbody id="usersDataTable">
                        <% data.gift_redeems.forEach(element => { %>
                        <tr>
                          <td><%= element.uid %></td>
                          <td><%= element.gift_code %></td>
                          <td class="bold">
                            <%= new Intl.NumberFormat('en-US', { style:
                            'currency', currency: 'INR'
                            }).format(element.amount) %>
                          </td>
                          <td>
                            <span
                              class="badge text-capitalize bg-<%= element.status == '1' ? 'success' : 'secondary' %>"
                              ><%= element.status == '1' ? 'success' : 'failed' %></span
                            >
                          </td>
                          <td>
                            <%= new
                            Date(element.created_at).toLocaleString("en-US", {
                            year: 'numeric', month: 'long', day: 'numeric',
                            hour: '2-digit', minute: '2-digit', second:
                            '2-digit' }) %>
                          </td>
                        </tr>
                        <%});%>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
              <!-- /Invoice table -->
              <!-- Invoice table -->
              <div class="card mb-4">
                <h5 class="card-header">Withdrawal History</h5>
                <div class="overflow-scroll" style="max-height: 400px">
                  <div class="table-responsive">
                    <table class="table table-sm">
                      <thead class="sticky-top">
                        <tr>
                          <th class="text-truncate">UID</th>
                          <th class="text-truncate">Transaction Id</th>
                          <th class="text-truncate">Amount</th>
                          <th class="text-truncate">Payment Platform</th>
                          <th class="text-truncate">Status</th>
                          <th class="text-truncate">Time</th>
                        </tr>
                      </thead>
                      <tbody id="usersDataTable">
                        <% data.withdrawal.forEach(element => { %>
                        <tr>
                          <td><%= element.uid %></td>
                          <td><%= element.transaction_id %></td>
                          <td class="bold">
                            <%= new Intl.NumberFormat('en-US', { style:
                            'currency', currency: 'INR'
                            }).format(element.amount) %>
                          </td>
                          <td><%= element.payment_platform %></td>
                          <td>
                            <span
                              class="badge text-capitalize bg-<%= element.status === 'approved' ? 'success' : 'secondary' %>"
                              ><%= element.status %></span
                            >
                          </td>
                          <td>
                            <%= new
                            Date(element.created_at).toLocaleString("en-US", {
                            year: 'numeric', month: 'long', day: 'numeric',
                            hour: '2-digit', minute: '2-digit', second:
                            '2-digit' }) %>
                          </td>
                        </tr>
                        <%});%>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
              <!-- /Invoice table -->
              <!-- Invoice table -->
              <div class="card mb-4">
                <h5 class="card-header">Deposit History</h5>
                <div class="overflow-scroll" style="max-height: 400px">
                  <div class="table-responsive">
                    <table class="table table-sm">
                      <thead class="sticky-top">
                        <tr>
                          <th class="text-truncate">UID</th>
                          <th class="text-truncate">Transaction Id</th>
                          <th class="text-truncate">Deposit Amount</th>
                          <th class="text-truncate">Received Amount</th>
                          <th class="text-truncate">Payment Platform</th>
                          <th class="text-truncate">Status</th>
                          <th class="text-truncate">Time</th>
                        </tr>
                      </thead>
                      <tbody id="usersDataTable">
                        <% data.deposits.forEach(element => { %>
                        <tr>
                          <td><%= element.uid %></td>
                          <td><%= element.transaction_id %></td>

                          <td class="bold text-warning">
                            <%= new Intl.NumberFormat('en-US', { style:
                            'currency', currency: 'INR'
                            }).format(element.deposit_amount) %>
                          </td>
                          <td class="bold text-success">
                            <%= new Intl.NumberFormat('en-US', { style:
                            'currency', currency: 'INR'
                            }).format(element.received_amount) %>
                          </td>
                          <td><%= element.payment_platform %></td>
                          <td>
                            <span
                              class="badge text-capitalize bg-<%= element.status === 'success' ? 'success' : 'secondary' %>"
                              ><%= element.status %></span
                            >
                          </td>
                          <td>
                            <%= new
                            Date(element.created_at).toLocaleString("en-US", {
                            year: 'numeric', month: 'long', day: 'numeric',
                            hour: '2-digit', minute: '2-digit', second:
                            '2-digit' }) %>
                          </td>
                        </tr>
                        <%});%>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
              <!-- /Invoice table -->
               <!-- Invoice table -->
              <div class="card mb-4">
                <h5 class="card-header">Banks</h5>
                <div class="overflow-scroll" style="max-height: 400px">
                  <div class="table-responsive">
                    <table class="table table-sm">
                      <thead class="sticky-top">
                        <tr>
                          <th class="text-truncate">UID</th>
                          <th class="text-truncate">Bank Name</th>
                          <th class="text-truncate">Recipient Name</th>
                          <th class="text-truncate">Account No.</th>
                          <th class="text-truncate">IFSC Code</th>
                          <th class="text-truncate">Current</th>
                          <th class="text-truncate">Phone No.</th>
                          <th class="text-truncate">Email</th>
                          <th class="text-truncate">Status</th>
                          <th class="text-truncate">Time</th>
                        </tr>
                      </thead>
                      <tbody id="usersDataTable">
                        <% data.banks.forEach(element => { %>
                        <tr>
                          <td><%= element.uid %></td>
                          <td><%= element.bank_name %></td>
                          <td><%= element.recipient_name %></td>
                          <td><%= element.account_no %></td>
                          <td><%= element.ifsc_code %></td>
                          <td>
                            <span
                              class="badge text-capitalize bg-<%= element.current == '1' ? 'success' : 'secondary' %>"
                              ><%= element.current == '1' ? 'Current' : 'Secondary' %></span
                            >
                          </td>
                          <td><%= element.phone_no %></td>
                          <td><%= element.email %></td>
                          <td>
                            <span
                              class="badge text-capitalize bg-<%= element.status == '1' ? 'success' : 'secondary' %>"
                              ><%= element.status == '1' ? 'active' : 'deactivated' %></span
                            >
                          </td>
                          <td>
                            <%= new
                            Date(element.created_at).toLocaleString("en-US", {
                            year: 'numeric', month: 'long', day: 'numeric',
                            hour: '2-digit', minute: '2-digit', second:
                            '2-digit' }) %>
                          </td>
                        </tr>
                        <%});%>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
              <!-- /Invoice table -->
            </div>
          </div>
        </div>
        <!-- / Content -->

        <div class="content-backdrop fade"></div>
      </div>
      <!-- Content wrapper -->
    </div>
    <!-- / Layout page -->
  </div>

  <!-- Overlay -->
  <div class="layout-overlay layout-menu-toggle"></div>
</div>
<!-- / Layout wrapper -->
<%- include('../common/footer') %>

<script></script>
